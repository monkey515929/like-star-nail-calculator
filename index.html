<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Like STar Nail çµå¸³</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background:#f6f6f6;
  padding:16px;
}
h1,h2 { margin:12px 0; }
.section {
  background:#fff;
  border-radius:12px;
  padding:12px;
  margin-bottom:16px;
}
.item {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:8px 0;
}
.controls button {
  width:32px;height:32px;
  border:none;border-radius:50%;
  background:#000;color:#fff;
  font-size:18px;
}
.controls span {
  margin:0 10px;
  min-width:20px;
  text-align:center;
}
textarea {
  width:100%;
  height:220px;
  font-size:14px;
}
.admin-item {
  display:flex;
  gap:6px;
  margin:6px 0;
}
.admin-item input, .admin-item select {
  flex:1;
}
.drag {
  cursor:grab;
}
</style>
</head>
<body>

<h1>Like STar Nail</h1>

<div id="front"></div>

<h2>âœ¨ çµ¦å®¢äººçš„æ˜ç´°ï¼ˆå¯è¤‡è£½ï¼‰</h2>
<textarea id="receipt" readonly></textarea>

<h2>âœ å‚™è¨»</h2>
<textarea id="note"></textarea>

<h2>ğŸ”’ å¾Œå°è¨­å®š</h2>
<div class="section" id="admin"></div>
<button onclick="addItem()">ï¼‹ æ–°å¢é …ç›®</button>

<script>
const KEY = 'like_star_nail_items';

let items = JSON.parse(localStorage.getItem(KEY)) || [
  {cat:'åŸºæœ¬å–®è‰²',name:'å–®è‰²å‡è† ',price:800,qty:0},
  {cat:'åŠ åƒ¹å–®æŒ‡',name:'é¡é¢(å–®æŒ‡)',price:120,qty:0},
  {cat:'åŠ åƒ¹å–®æŒ‡',name:'ç«‹é«”é€ å‹/ç•°æè³ª(å–®æŒ‡)',price:100,qty:0},
  {cat:'å»¶ç”²',name:'å»¶ç”²(å–®æŒ‡)',price:100,qty:0},
  {cat:'å¸ç”²',name:'å¸ç”²(ä»–åº—)',price:500,qty:0},
  {cat:'æ‰£é™¤',name:'è¨‚é‡‘500',price:-500,qty:0},
  {cat:'æ‰£é™¤',name:'è¨‚é‡‘1000',price:-1000,qty:0}
];

function save() {
  localStorage.setItem(KEY, JSON.stringify(items));
}

function renderFront() {
  const front = document.getElementById('front');
  front.innerHTML = '';
  [...new Set(items.map(i=>i.cat))].forEach(cat=>{
    let sec = document.createElement('div');
    sec.className = 'section';
    sec.innerHTML = `<h2>${cat}</h2>`;
    items.filter(i=>i.cat===cat).forEach(i=>{
      let row = document.createElement('div');
      row.className='item';
      row.innerHTML=`
        <div>${i.name} $${i.price}</div>
        <div class="controls">
          <button onclick="changeQty('${i.name}',-1)">âˆ’</button>
          <span>${i.qty}</span>
          <button onclick="changeQty('${i.name}',1)">ï¼‹</button>
        </div>`;
      sec.appendChild(row);
    });
    front.appendChild(sec);
  });
}

function changeQty(name,delta){
  let it = items.find(i=>i.name===name);
  it.qty = Math.max(0,it.qty+delta);
  save(); render();
}

function renderReceipt(){
  let lines=[], total=0, deposit=0;
  items.forEach(i=>{
    if(i.qty>0){
      let sum=i.price*i.qty;
      if(i.price<0) deposit+=sum;
      else total+=sum;
      lines.push(`${i.name} x${i.qty} : $${sum}`);
    }
  });
  document.getElementById('receipt').value =
`âœ¨ Like STar Nail çµå¸³æ˜ç´° âœ¨
--------------------------
${lines.join('\n')}
--------------------------
ç¸½è¨ˆé‡‘é¡: $${total}
å·²ä»˜å®šé‡‘: $${deposit}
ç¾å ´æ‡‰ä»˜: $${total+deposit}
--------------------------
æœŸå¾…ä¸‹æ¬¡ç‚ºæ‚¨æœå‹™ï¼`;
}

function renderAdmin(){
  const a=document.getElementById('admin');
  a.innerHTML='';
  items.forEach((i,idx)=>{
    let row=document.createElement('div');
    row.className='admin-item';
    row.innerHTML=`
      <span class="drag">â˜°</span>
      <input value="${i.name}" onchange="i.name=this.value;save();render()">
      <input type="number" value="${i.price}" onchange="i.price=+this.value;save();render()">
      <input value="${i.cat}" onchange="i.cat=this.value;save();render()">`;
    a.appendChild(row);
  });
}

function addItem(){
  items.push({cat:'è‡ªè¨‚',name:'æ–°é …ç›®',price:0,qty:0});
  save(); render();
}

function render(){
  renderFront();
  renderAdmin();
  renderReceipt();
}

render();
</script>
</body>
</html>