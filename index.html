<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>Like STar nailï½œç¾ç”²è¨ˆç®—æ©Ÿ</title>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont;
  background:#f6f4f2;
  padding:18px;
}
h1{text-align:center;margin:8px 0 14px}
.topbar{
  display:flex;
  justify-content:flex-end;
}
button{
  border:none;
  border-radius:10px;
  padding:6px 10px;
}
.section{
  background:#fff;
  border-radius:16px;
  padding:14px;
  margin-bottom:16px;
}
.item{
  display:flex;
  align-items:center;
  gap:6px;
  margin-bottom:8px;
}
.drag{
  cursor:grab;
  font-size:18px;
  padding:0 4px;
  opacity:.5;
}
.name{flex:2}
.price{font-size:12px;opacity:.6}
.qty{
  display:flex;
  align-items:center;
  gap:6px;
}
.qty button{
  width:28px;height:28px;
  border-radius:50%;
  background:#000;
  color:#fff;
}
.backend{
  background:#f1f1f1;
  border-radius:10px;
  padding:6px;
  margin-top:6px;
}
.backend input{
  width:100%;
  margin-bottom:4px;
}
.hidden{display:none}
.total{
  font-size:18px;
  text-align:right;
  font-weight:bold;
}
.summary{
  font-size:14px;
  line-height:1.5;
  white-space:pre-line;
}
textarea{width:100%;height:80px}
</style>
</head>

<body>

<div class="topbar">
  <button onclick="toggleBackend()">âš™ï¸ å¾Œå°</button>
</div>

<h1>Like STar nail</h1>

<div id="app"></div>

<div class="section">
  <h3>ğŸ§¾ æ˜ç´°ï¼ˆçµ¦å®¢äººï¼‰</h3>
  <div id="summary" class="summary"></div>
</div>

<div class="section">
  <h3>è¨‚é‡‘</h3>
  <button onclick="setDeposit(0)">ä¸æ‰£</button>
  <button onclick="setDeposit(500)">500</button>
  <button onclick="setDeposit(1000)">1000</button>
</div>

<div class="section">
  <h3>å‚™è¨» / å‚³ LINE çµ¦å®¢äºº</h3>
  <textarea id="note"></textarea>
  <button onclick="copyLine()">è¤‡è£½æ˜ç´°</button>
</div>

<div class="section total">
  ç¸½é‡‘é¡ï¼š$<span id="total">0</span>
</div>

<script>
let deposit=0;
let showBackend=false;

const data=[
{title:'åŸºæœ¬æ¬¾ / å¥—é¤',items:[
{name:'å–®è‰²å‡è† ï¼ˆè·³è‰²+100/è‰²ï¼‰',price:800,qty:0},
{name:'è²“çœ¼ï¼ˆè·³è‰²+100/è‰²ï¼‰',price:1000,qty:0},
{name:'è²“çœ¼ç‰¹æ®Šå¸æ³•ï¼ˆç»ç’ƒç ã€è¿½å…‰ã€æ³•å¼ç­‰ï¼‰',price:1200,qty:0},
{name:'é¡é¢ã€äº®ç‰‡ã€æ¼¸å±¤ã€æ³•å¼ï¼ˆè¶³éƒ¨+200ï¼‰',price:1200,qty:0},
]},
{title:'åŠ åƒ¹å–®æŒ‡',items:[
{name:'é¡é¢',price:120,qty:0},
{name:'æ‰‹ç¹ª',price:50,qty:0},
{name:'é‡æŸ“',price:100,qty:0},
{name:'ç«‹é«”é€ å‹ã€ç•°æè³ª',price:100,qty:0},
{name:'é…é£¾ã€é‘½é£¾',price:50,qty:0},
{name:'å»¶ç”²',price:100,qty:0},
]},
{title:'å¸ç”²',items:[
{name:'æœ¬åº—å¸ç”²çºŒä½œã€ç´”å¸',price:300,qty:0},
{name:'ä»–åº—å¸ç”²çºŒä½œ',price:400,qty:0},
{name:'ä»–åº—ç´”å¸',price:500,qty:0},
{name:'ç´”å¸ï¼‹åŸºç¤ä¿é¤Š',price:800,qty:0},
]}
];

function render(){
 const app=document.getElementById('app');
 app.innerHTML='';
 data.forEach((sec,s)=>{
  const box=document.createElement('div');
  box.className='section';
  box.innerHTML=`<h3>${sec.title}</h3>`;
  const list=document.createElement('div');
  list.id='list'+s;

  sec.items.forEach((it,i)=>{
    const row=document.createElement('div');
    row.className='item';
    row.innerHTML=`
      <div class="drag">â‰¡</div>
      <div class="name">${it.name}<div class="price">$${it.price}</div></div>
      <div class="qty">
        <button onclick="chg(${s},${i},-1)">âˆ’</button>
        <span>${it.qty}</span>
        <button onclick="chg(${s},${i},1)">ï¼‹</button>
      </div>
      <div class="backend ${showBackend?'':'hidden'}">
        <input value="${it.name}" oninput="itName(${s},${i},this.value)">
        <input type="number" value="${it.price}" oninput="itPrice(${s},${i},this.value)">
        <button onclick="del(${s},${i})">åˆªé™¤</button>
      </div>
    `;
    list.appendChild(row);
  });

  box.appendChild(list);

  if(showBackend){
    const add=document.createElement('button');
    add.textContent='ï¼‹æ–°å¢é …ç›®';
    add.onclick=()=>addItem(s);
    box.appendChild(add);

    new Sortable(list,{
      animation:150,
      handle:'.drag',
      delay:150,
      delayOnTouchOnly:true,
      onEnd:e=>{
        const moved=sec.items.splice(e.oldIndex,1)[0];
        sec.items.splice(e.newIndex,0,moved);
        render();
      }
    });
  }

  app.appendChild(box);
 });
 calc();
}

function chg(s,i,v){
 data[s].items[i].qty=Math.max(0,data[s].items[i].qty+v);
 calc();
 render();
}
function itName(s,i,v){data[s].items[i].name=v;calc()}
function itPrice(s,i,v){data[s].items[i].price=+v;calc()}
function del(s,i){data[s].items.splice(i,1);render()}
function addItem(s){
 data[s].items.push({name:'æ–°é …ç›®',price:0,qty:0});
 render();
}
function toggleBackend(){
 showBackend=!showBackend;
 render();
}
function calc(){
 let sum=0;
 let summary='';
 data.forEach(sec=>{
  sec.items.forEach(it=>{
    if(it.qty>0){
      const sub=it.price*it.qty;
      sum+=sub;
      summary+=`${it.name} x${it.qty}ã€€$${sub}\n`;
    }
  });
 });
 if(deposit>0) summary+=`è¨‚é‡‘æ‰£é™¤ï¼š-$${deposit}\n`;
 document.getElementById('summary').innerText=summary||'å°šæœªé¸æ“‡é …ç›®';
 document.getElementById('total').innerText=sum-deposit;
}
function setDeposit(v){deposit=v;calc()}
function copyLine(){
 let t='Like STar nail ç¾ç”²æ˜ç´°\n';
 t+=document.getElementById('summary').innerText+'\n';
 t+=`ç¸½é‡‘é¡ï¼š$${document.getElementById('total').innerText}\n`;
 t+=`å‚™è¨»ï¼š${note.value}`;
 navigator.clipboard.writeText(t);
 alert('å·²è¤‡è£½ï¼Œå¯ç›´æ¥è²¼ LINE');
}

render();
</script>

</body>
</html>